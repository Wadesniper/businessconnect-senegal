{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Table,Space,Button,Modal,message,Tag}from'antd';import{adminService}from'../../../services/adminService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserManagement=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[pagination,setPagination]=useState({current:1,pageSize:10,total:0});const fetchUsers=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let pageSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;try{setLoading(true);const response=await adminService.getUsers(page,pageSize);setUsers(response.data);setPagination({current:page,pageSize,total:response.total});}catch(error){message.error('Erreur lors du chargement des utilisateurs');}finally{setLoading(false);}};useEffect(()=>{fetchUsers();},[]);const handleTableChange=pagination=>{fetchUsers(pagination.current,pagination.pageSize);};const handleStatusChange=async(userId,newStatus)=>{try{await adminService.updateUserStatus(userId,newStatus);message.success('Statut mis à jour avec succès');fetchUsers(pagination.current,pagination.pageSize);}catch(error){message.error('Erreur lors de la mise à jour du statut');}};const handleDelete=async userId=>{Modal.confirm({title:'Êtes-vous sûr de vouloir supprimer cet utilisateur ?',content:'Cette action est irréversible.',okText:'Oui',okType:'danger',cancelText:'Non',onOk:async()=>{try{await adminService.deleteUser(userId);message.success('Utilisateur supprimé avec succès');fetchUsers(pagination.current,pagination.pageSize);}catch(error){message.error('Erreur lors de la suppression');}}});};const columns=[{title:'Nom',dataIndex:'name',key:'name'},{title:'Email',dataIndex:'email',key:'email'},{title:'Rôle',dataIndex:'role',key:'role',render:role=>/*#__PURE__*/_jsx(Tag,{color:role==='admin'?'red':'blue',children:role})},{title:'Statut',dataIndex:'status',key:'status',render:status=>/*#__PURE__*/_jsx(Tag,{color:status==='active'?'green':'orange',children:status})},{title:'Type d\\'abonnement',dataIndex:'subscriptionType',key:'subscriptionType',render:type=>type||'Aucun'},{title:'Date d\\'inscription',dataIndex:'createdAt',key:'createdAt',render:date=>new Date(date).toLocaleDateString()},{title:'Actions',key:'actions',render:(_,record)=>/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:record.status==='active'?'default':'primary',onClick:()=>handleStatusChange(record.id,record.status==='active'?'inactive':'active'),children:record.status==='active'?'Désactiver':'Activer'}),/*#__PURE__*/_jsx(Button,{danger:true,onClick:()=>handleDelete(record.id),children:\"Supprimer\"})]})}];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gestion des utilisateurs\"}),/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:users,rowKey:\"id\",pagination:pagination,loading:loading,onChange:handleTableChange})]});};export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","Table","Space","Button","Modal","message","Tag","adminService","jsx","_jsx","jsxs","_jsxs","UserManagement","users","setUsers","loading","setLoading","pagination","setPagination","current","pageSize","total","fetchUsers","page","arguments","length","undefined","response","getUsers","data","error","handleTableChange","handleStatusChange","userId","newStatus","updateUserStatus","success","handleDelete","confirm","title","content","okText","okType","cancelText","onOk","deleteUser","columns","dataIndex","key","render","role","color","children","status","type","date","Date","toLocaleDateString","_","record","onClick","id","danger","dataSource","rowKey","onChange"],"sources":["C:/Users/babac/OneDrive/Bureau/businessconnect-senegal-main/businessconnect-senegal/client/src/pages/admin/components/UserManagement.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Table, Space, Button, Modal, message, Tag } from 'antd';\r\nimport { adminService } from '../../../services/adminService';\r\n\r\ninterface User {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  role: string;\r\n  status: 'active' | 'inactive';\r\n  subscriptionType?: string;\r\n  createdAt: string;\r\n}\r\n\r\nconst UserManagement: React.FC = () => {\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [pagination, setPagination] = useState({ current: 1, pageSize: 10, total: 0 });\r\n\r\n  const fetchUsers = async (page = 1, pageSize = 10) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await adminService.getUsers(page, pageSize);\r\n      setUsers(response.data);\r\n      setPagination({\r\n        current: page,\r\n        pageSize,\r\n        total: response.total,\r\n      });\r\n    } catch (error) {\r\n      message.error('Erreur lors du chargement des utilisateurs');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const handleTableChange = (pagination: any) => {\r\n    fetchUsers(pagination.current, pagination.pageSize);\r\n  };\r\n\r\n  const handleStatusChange = async (userId: string, newStatus: 'active' | 'inactive') => {\r\n    try {\r\n      await adminService.updateUserStatus(userId, newStatus);\r\n      message.success('Statut mis à jour avec succès');\r\n      fetchUsers(pagination.current, pagination.pageSize);\r\n    } catch (error) {\r\n      message.error('Erreur lors de la mise à jour du statut');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (userId: string) => {\r\n    Modal.confirm({\r\n      title: 'Êtes-vous sûr de vouloir supprimer cet utilisateur ?',\r\n      content: 'Cette action est irréversible.',\r\n      okText: 'Oui',\r\n      okType: 'danger',\r\n      cancelText: 'Non',\r\n      onOk: async () => {\r\n        try {\r\n          await adminService.deleteUser(userId);\r\n          message.success('Utilisateur supprimé avec succès');\r\n          fetchUsers(pagination.current, pagination.pageSize);\r\n        } catch (error) {\r\n          message.error('Erreur lors de la suppression');\r\n        }\r\n      },\r\n    });\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Nom',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n    {\r\n      title: 'Email',\r\n      dataIndex: 'email',\r\n      key: 'email',\r\n    },\r\n    {\r\n      title: 'Rôle',\r\n      dataIndex: 'role',\r\n      key: 'role',\r\n      render: (role: string) => (\r\n        <Tag color={role === 'admin' ? 'red' : 'blue'}>{role}</Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Statut',\r\n      dataIndex: 'status',\r\n      key: 'status',\r\n      render: (status: string) => (\r\n        <Tag color={status === 'active' ? 'green' : 'orange'}>{status}</Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Type d\\'abonnement',\r\n      dataIndex: 'subscriptionType',\r\n      key: 'subscriptionType',\r\n      render: (type: string) => type || 'Aucun',\r\n    },\r\n    {\r\n      title: 'Date d\\'inscription',\r\n      dataIndex: 'createdAt',\r\n      key: 'createdAt',\r\n      render: (date: string) => new Date(date).toLocaleDateString(),\r\n    },\r\n    {\r\n      title: 'Actions',\r\n      key: 'actions',\r\n      render: (_: any, record: User) => (\r\n        <Space>\r\n          <Button\r\n            type={record.status === 'active' ? 'default' : 'primary'}\r\n            onClick={() => handleStatusChange(record.id, record.status === 'active' ? 'inactive' : 'active')}\r\n          >\r\n            {record.status === 'active' ? 'Désactiver' : 'Activer'}\r\n          </Button>\r\n          <Button danger onClick={() => handleDelete(record.id)}>\r\n            Supprimer\r\n          </Button>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <h2>Gestion des utilisateurs</h2>\r\n      <Table\r\n        columns={columns}\r\n        dataSource={users}\r\n        rowKey=\"id\"\r\n        pagination={pagination}\r\n        loading={loading}\r\n        onChange={handleTableChange}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserManagement; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}