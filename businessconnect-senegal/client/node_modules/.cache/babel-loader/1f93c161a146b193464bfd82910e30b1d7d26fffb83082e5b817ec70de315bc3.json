{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Table,Space,Button,Modal,message,Tag}from'antd';import{adminService}from'../../../services/adminService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserManagement=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[pagination,setPagination]=useState({current:1,pageSize:10,total:0});const fetchUsers=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let pageSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;try{setLoading(true);const response=await adminService.getUsers(page,pageSize);setUsers(response.data);setPagination({current:page,pageSize,total:response.total});}catch(error){message.error('Erreur lors du chargement des utilisateurs');}finally{setLoading(false);}};useEffect(()=>{fetchUsers();},[]);const handleTableChange=pagination=>{fetchUsers(pagination.current,pagination.pageSize);};const handleStatusChange=async(userId,newStatus)=>{try{await adminService.updateUserStatus(userId,newStatus);message.success('Statut mis à jour avec succès');fetchUsers(pagination.current,pagination.pageSize);}catch(error){message.error('Erreur lors de la mise à jour du statut');}};const handleDelete=async userId=>{Modal.confirm({title:'Êtes-vous sûr de vouloir supprimer cet utilisateur ?',content:'Cette action est irréversible.',okText:'Oui',okType:'danger',cancelText:'Non',onOk:async()=>{try{await adminService.deleteUser(userId);message.success('Utilisateur supprimé avec succès');fetchUsers(pagination.current,pagination.pageSize);}catch(error){message.error('Erreur lors de la suppression');}}});};const columns=[{title:'Nom',dataIndex:'name',key:'name'},{title:'Email',dataIndex:'email',key:'email'},{title:'Rôle',dataIndex:'role',key:'role',render:role=>/*#__PURE__*/_jsx(Tag,{color:role==='admin'?'red':'blue',children:role})},{title:'Statut',dataIndex:'status',key:'status',render:status=>/*#__PURE__*/_jsx(Tag,{color:status==='active'?'green':'orange',children:status})},{title:'Type d\\'abonnement',dataIndex:'subscriptionType',key:'subscriptionType',render:type=>type||'Aucun'},{title:'Date d\\'inscription',dataIndex:'createdAt',key:'createdAt',render:date=>new Date(date).toLocaleDateString()},{title:'Actions',key:'actions',render:(_,record)=>/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:record.status==='active'?'default':'primary',onClick:()=>handleStatusChange(record.id,record.status==='active'?'inactive':'active'),children:record.status==='active'?'Désactiver':'Activer'}),/*#__PURE__*/_jsx(Button,{danger:true,onClick:()=>handleDelete(record.id),children:\"Supprimer\"})]})}];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gestion des utilisateurs\"}),/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:users,rowKey:\"id\",pagination:pagination,loading:loading,onChange:handleTableChange})]});};export default UserManagement;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}