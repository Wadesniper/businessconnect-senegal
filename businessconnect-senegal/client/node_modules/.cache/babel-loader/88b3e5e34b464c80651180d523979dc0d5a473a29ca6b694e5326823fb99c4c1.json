{"ast":null,"code":"import React,{useEffect}from'react';import{Result,Button,Space}from'antd';import{CheckCircleOutlined,HomeOutlined,FileOutlined}from'@ant-design/icons';import{useNavigate,useLocation}from'react-router-dom';import styled from'styled-components';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StyledResult=styled(Result)`\n  padding: 48px 32px;\n  \n  .ant-result-icon {\n    .anticon {\n      font-size: 72px;\n      color: #52c41a;\n    }\n  }\n`;const PaymentSuccess=()=>{const navigate=useNavigate();const location=useLocation();const searchParams=new URLSearchParams(location.search);const token=searchParams.get('token');const ref=searchParams.get('ref');useEffect(()=>{// Vous pouvez ajouter ici une vérification du paiement avec votre backend\nif(token&&ref){// Vérifier le statut du paiement\nverifyPayment(token,ref);}},[token,ref]);const verifyPayment=async(token,ref)=>{try{const response=await fetch('/api/payments/verify',{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify({token,ref})});if(!response.ok){throw new Error('Erreur lors de la vérification du paiement');}// Mettre à jour le statut de l'abonnement dans le localStorage ou le state global\nconst data=await response.json();if(data.success){localStorage.setItem('subscription_status','active');}}catch(error){console.error('Erreur de vérification:',error);}};return/*#__PURE__*/_jsx(\"div\",{style:{minHeight:'80vh',display:'flex',alignItems:'center',justifyContent:'center',background:'#f0f2f5'},children:/*#__PURE__*/_jsx(StyledResult,{icon:/*#__PURE__*/_jsx(CheckCircleOutlined,{}),title:\"Paiement r\\xE9ussi !\",subTitle:\"Votre abonnement a \\xE9t\\xE9 activ\\xE9 avec succ\\xE8s. Vous pouvez maintenant profiter de toutes les fonctionnalit\\xE9s premium.\",extra:/*#__PURE__*/_jsxs(Space,{size:\"middle\",children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(HomeOutlined,{}),onClick:()=>navigate('/'),children:\"Retour \\xE0 l'accueil\"}),/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(FileOutlined,{}),onClick:()=>navigate('/account/subscription'),children:\"Voir mon abonnement\"})]})})});};export default PaymentSuccess;","map":{"version":3,"names":["React","useEffect","Result","Button","Space","CheckCircleOutlined","HomeOutlined","FileOutlined","useNavigate","useLocation","styled","jsx","_jsx","jsxs","_jsxs","StyledResult","PaymentSuccess","navigate","location","searchParams","URLSearchParams","search","token","get","ref","verifyPayment","response","fetch","method","headers","localStorage","getItem","body","JSON","stringify","ok","Error","data","json","success","setItem","error","console","style","minHeight","display","alignItems","justifyContent","background","children","icon","title","subTitle","extra","size","type","onClick"],"sources":["C:/Users/babac/OneDrive/Bureau/businessconnect-senegal-main/businessconnect-senegal/client/src/pages/payment/PaymentSuccess.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Result, Button, Space } from 'antd';\r\nimport { CheckCircleOutlined, HomeOutlined, FileOutlined } from '@ant-design/icons';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\n\r\nconst StyledResult = styled(Result)`\r\n  padding: 48px 32px;\r\n  \r\n  .ant-result-icon {\r\n    .anticon {\r\n      font-size: 72px;\r\n      color: #52c41a;\r\n    }\r\n  }\r\n`;\r\n\r\nconst PaymentSuccess: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const searchParams = new URLSearchParams(location.search);\r\n  const token = searchParams.get('token');\r\n  const ref = searchParams.get('ref');\r\n\r\n  useEffect(() => {\r\n    // Vous pouvez ajouter ici une vérification du paiement avec votre backend\r\n    if (token && ref) {\r\n      // Vérifier le statut du paiement\r\n      verifyPayment(token, ref);\r\n    }\r\n  }, [token, ref]);\r\n\r\n  const verifyPayment = async (token: string, ref: string) => {\r\n    try {\r\n      const response = await fetch('/api/payments/verify', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify({ token, ref })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Erreur lors de la vérification du paiement');\r\n      }\r\n\r\n      // Mettre à jour le statut de l'abonnement dans le localStorage ou le state global\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        localStorage.setItem('subscription_status', 'active');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur de vérification:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ \r\n      minHeight: '80vh',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      background: '#f0f2f5'\r\n    }}>\r\n      <StyledResult\r\n        icon={<CheckCircleOutlined />}\r\n        title=\"Paiement réussi !\"\r\n        subTitle=\"Votre abonnement a été activé avec succès. Vous pouvez maintenant profiter de toutes les fonctionnalités premium.\"\r\n        extra={\r\n          <Space size=\"middle\">\r\n            <Button \r\n              type=\"primary\" \r\n              icon={<HomeOutlined />}\r\n              onClick={() => navigate('/')}\r\n            >\r\n              Retour à l'accueil\r\n            </Button>\r\n            <Button\r\n              icon={<FileOutlined />}\r\n              onClick={() => navigate('/account/subscription')}\r\n            >\r\n              Voir mon abonnement\r\n            </Button>\r\n          </Space>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentSuccess; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}