{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Table,Space,message,Tag,Select}from'antd';import{adminService}from'../../../services/adminService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SubscriptionManagement=()=>{const[subscriptions,setSubscriptions]=useState([]);const[loading,setLoading]=useState(true);const[pagination,setPagination]=useState({current:1,pageSize:10,total:0});const fetchSubscriptions=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let pageSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;try{setLoading(true);const response=await adminService.getSubscriptions(page,pageSize);setSubscriptions(response.data);setPagination({current:page,pageSize,total:response.total});}catch(error){message.error('Erreur lors du chargement des abonnements');}finally{setLoading(false);}};useEffect(()=>{fetchSubscriptions();},[]);const handleTableChange=pagination=>{fetchSubscriptions(pagination.current,pagination.pageSize);};const handleStatusChange=async(subscriptionId,status)=>{try{await adminService.updateSubscription(subscriptionId,{status});message.success('Statut mis à jour avec succès');fetchSubscriptions(pagination.current,pagination.pageSize);}catch(error){message.error('Erreur lors de la mise à jour du statut');}};const getStatusColor=status=>{switch(status){case'active':return'green';case'cancelled':return'red';case'expired':return'orange';default:return'default';}};const columns=[{title:'Utilisateur',dataIndex:'userName',key:'userName'},{title:'Type',dataIndex:'type',key:'type',render:type=>/*#__PURE__*/_jsx(Tag,{color:\"blue\",children:type})},{title:'Statut',dataIndex:'status',key:'status',render:status=>/*#__PURE__*/_jsx(Tag,{color:getStatusColor(status),children:status})},{title:'Date de début',dataIndex:'startDate',key:'startDate',render:date=>new Date(date).toLocaleDateString()},{title:'Date de fin',dataIndex:'endDate',key:'endDate',render:date=>new Date(date).toLocaleDateString()},{title:'Montant',dataIndex:'amount',key:'amount',render:amount=>`${amount.toLocaleString()} FCFA`},{title:'Actions',key:'actions',render:(_,record)=>/*#__PURE__*/_jsx(Space,{children:/*#__PURE__*/_jsxs(Select,{value:record.status,onChange:value=>handleStatusChange(record.id,value),style:{width:120},children:[/*#__PURE__*/_jsx(Select.Option,{value:\"active\",children:\"Actif\"}),/*#__PURE__*/_jsx(Select.Option,{value:\"cancelled\",children:\"Annul\\xE9\"}),/*#__PURE__*/_jsx(Select.Option,{value:\"expired\",children:\"Expir\\xE9\"})]})})}];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gestion des abonnements\"}),/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:subscriptions,rowKey:\"id\",pagination:pagination,loading:loading,onChange:handleTableChange})]});};export default SubscriptionManagement;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}