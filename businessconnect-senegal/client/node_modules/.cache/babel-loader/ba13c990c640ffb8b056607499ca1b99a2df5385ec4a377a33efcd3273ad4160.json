{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Table,Space,message,Tag,Select}from'antd';import{adminService}from'../../../services/adminService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SubscriptionManagement=()=>{const[subscriptions,setSubscriptions]=useState([]);const[loading,setLoading]=useState(true);const[pagination,setPagination]=useState({current:1,pageSize:10,total:0});const fetchSubscriptions=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let pageSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;try{setLoading(true);const response=await adminService.getSubscriptions(page,pageSize);setSubscriptions(response.data);setPagination({current:page,pageSize,total:response.total});}catch(error){message.error('Erreur lors du chargement des abonnements');}finally{setLoading(false);}};useEffect(()=>{fetchSubscriptions();},[]);const handleTableChange=pagination=>{fetchSubscriptions(pagination.current,pagination.pageSize);};const handleStatusChange=async(subscriptionId,status)=>{try{await adminService.updateSubscription(subscriptionId,{status});message.success('Statut mis à jour avec succès');fetchSubscriptions(pagination.current,pagination.pageSize);}catch(error){message.error('Erreur lors de la mise à jour du statut');}};const getStatusColor=status=>{switch(status){case'active':return'green';case'cancelled':return'red';case'expired':return'orange';default:return'default';}};const columns=[{title:'Utilisateur',dataIndex:'userName',key:'userName'},{title:'Type',dataIndex:'type',key:'type',render:type=>/*#__PURE__*/_jsx(Tag,{color:\"blue\",children:type})},{title:'Statut',dataIndex:'status',key:'status',render:status=>/*#__PURE__*/_jsx(Tag,{color:getStatusColor(status),children:status})},{title:'Date de début',dataIndex:'startDate',key:'startDate',render:date=>new Date(date).toLocaleDateString()},{title:'Date de fin',dataIndex:'endDate',key:'endDate',render:date=>new Date(date).toLocaleDateString()},{title:'Montant',dataIndex:'amount',key:'amount',render:amount=>`${amount.toLocaleString()} FCFA`},{title:'Actions',key:'actions',render:(_,record)=>/*#__PURE__*/_jsx(Space,{children:/*#__PURE__*/_jsxs(Select,{value:record.status,onChange:value=>handleStatusChange(record.id,value),style:{width:120},children:[/*#__PURE__*/_jsx(Select.Option,{value:\"active\",children:\"Actif\"}),/*#__PURE__*/_jsx(Select.Option,{value:\"cancelled\",children:\"Annul\\xE9\"}),/*#__PURE__*/_jsx(Select.Option,{value:\"expired\",children:\"Expir\\xE9\"})]})})}];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gestion des abonnements\"}),/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:subscriptions,rowKey:\"id\",pagination:pagination,loading:loading,onChange:handleTableChange})]});};export default SubscriptionManagement;","map":{"version":3,"names":["React","useState","useEffect","Table","Space","message","Tag","Select","adminService","jsx","_jsx","jsxs","_jsxs","SubscriptionManagement","subscriptions","setSubscriptions","loading","setLoading","pagination","setPagination","current","pageSize","total","fetchSubscriptions","page","arguments","length","undefined","response","getSubscriptions","data","error","handleTableChange","handleStatusChange","subscriptionId","status","updateSubscription","success","getStatusColor","columns","title","dataIndex","key","render","type","color","children","date","Date","toLocaleDateString","amount","toLocaleString","_","record","value","onChange","id","style","width","Option","dataSource","rowKey"],"sources":["C:/Users/babac/OneDrive/Bureau/businessconnect-senegal-main/businessconnect-senegal/client/src/pages/admin/components/SubscriptionManagement.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Table, Space, Button, Modal, message, Tag, Select } from 'antd';\r\nimport { adminService } from '../../../services/adminService';\r\n\r\ninterface Subscription {\r\n  id: string;\r\n  userId: string;\r\n  userName: string;\r\n  type: string;\r\n  status: 'active' | 'cancelled' | 'expired';\r\n  startDate: string;\r\n  endDate: string;\r\n  amount: number;\r\n}\r\n\r\nconst SubscriptionManagement: React.FC = () => {\r\n  const [subscriptions, setSubscriptions] = useState<Subscription[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [pagination, setPagination] = useState({ current: 1, pageSize: 10, total: 0 });\r\n\r\n  const fetchSubscriptions = async (page = 1, pageSize = 10) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await adminService.getSubscriptions(page, pageSize);\r\n      setSubscriptions(response.data);\r\n      setPagination({\r\n        current: page,\r\n        pageSize,\r\n        total: response.total,\r\n      });\r\n    } catch (error) {\r\n      message.error('Erreur lors du chargement des abonnements');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchSubscriptions();\r\n  }, []);\r\n\r\n  const handleTableChange = (pagination: any) => {\r\n    fetchSubscriptions(pagination.current, pagination.pageSize);\r\n  };\r\n\r\n  const handleStatusChange = async (subscriptionId: string, status: string) => {\r\n    try {\r\n      await adminService.updateSubscription(subscriptionId, { status });\r\n      message.success('Statut mis à jour avec succès');\r\n      fetchSubscriptions(pagination.current, pagination.pageSize);\r\n    } catch (error) {\r\n      message.error('Erreur lors de la mise à jour du statut');\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'active':\r\n        return 'green';\r\n      case 'cancelled':\r\n        return 'red';\r\n      case 'expired':\r\n        return 'orange';\r\n      default:\r\n        return 'default';\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Utilisateur',\r\n      dataIndex: 'userName',\r\n      key: 'userName',\r\n    },\r\n    {\r\n      title: 'Type',\r\n      dataIndex: 'type',\r\n      key: 'type',\r\n      render: (type: string) => (\r\n        <Tag color=\"blue\">{type}</Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Statut',\r\n      dataIndex: 'status',\r\n      key: 'status',\r\n      render: (status: string) => (\r\n        <Tag color={getStatusColor(status)}>{status}</Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Date de début',\r\n      dataIndex: 'startDate',\r\n      key: 'startDate',\r\n      render: (date: string) => new Date(date).toLocaleDateString(),\r\n    },\r\n    {\r\n      title: 'Date de fin',\r\n      dataIndex: 'endDate',\r\n      key: 'endDate',\r\n      render: (date: string) => new Date(date).toLocaleDateString(),\r\n    },\r\n    {\r\n      title: 'Montant',\r\n      dataIndex: 'amount',\r\n      key: 'amount',\r\n      render: (amount: number) => `${amount.toLocaleString()} FCFA`,\r\n    },\r\n    {\r\n      title: 'Actions',\r\n      key: 'actions',\r\n      render: (_: any, record: Subscription) => (\r\n        <Space>\r\n          <Select\r\n            value={record.status}\r\n            onChange={(value) => handleStatusChange(record.id, value)}\r\n            style={{ width: 120 }}\r\n          >\r\n            <Select.Option value=\"active\">Actif</Select.Option>\r\n            <Select.Option value=\"cancelled\">Annulé</Select.Option>\r\n            <Select.Option value=\"expired\">Expiré</Select.Option>\r\n          </Select>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <h2>Gestion des abonnements</h2>\r\n      <Table\r\n        columns={columns}\r\n        dataSource={subscriptions}\r\n        rowKey=\"id\"\r\n        pagination={pagination}\r\n        loading={loading}\r\n        onChange={handleTableChange}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubscriptionManagement; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}