{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Layout,Card,Button,Tabs,Space,Input,Avatar,Tag,message}from'antd';import{PlusOutlined,SearchOutlined}from'@ant-design/icons';import{useNavigate}from'react-router-dom';import CreateDiscussionModal from'./CreateDiscussionModal';import{authService}from'../../services/authService';import{api}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Content}=Layout;const{TabPane}=Tabs;const{Search}=Input;const ForumPage=()=>{const navigate=useNavigate();const[isCreateModalVisible,setIsCreateModalVisible]=useState(false);const[searchText,setSearchText]=useState('');const[activeCategory,setActiveCategory]=useState('all');const[discussions,setDiscussions]=useState([]);const[loading,setLoading]=useState(true);const categories=[{key:'all',label:'Toutes les discussions'},{key:'emploi',label:'Emploi'},{key:'formation',label:'Formation'},{key:'entrepreneuriat',label:'Entrepreneuriat'},{key:'conseils',label:'Conseils'},{key:'networking',label:'Networking'},{key:'financement',label:'Financement'}];useEffect(()=>{fetchDiscussions();},[]);const fetchDiscussions=async()=>{try{const response=await api.get('/forum/discussions');setDiscussions(response.data);}catch(error){message.error('Erreur lors du chargement des discussions');}finally{setLoading(false);}};const handleCreateDiscussion=()=>{if(!authService.getToken()){message.warning('Veuillez vous connecter pour créer une discussion');navigate('/login');return;}setIsCreateModalVisible(true);};const handleSearch=value=>{setSearchText(value);};const filteredDiscussions=discussions.filter(discussion=>{const matchesSearch=discussion.title.toLowerCase().includes(searchText.toLowerCase())||discussion.content.toLowerCase().includes(searchText.toLowerCase());const matchesCategory=activeCategory==='all'||discussion.category===activeCategory;return matchesSearch&&matchesCategory;});if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Chargement...\"});}return/*#__PURE__*/_jsx(Layout,{style:{padding:'24px'},children:/*#__PURE__*/_jsxs(Content,{children:[/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",size:\"large\",style:{width:'100%'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Forum de la communaut\\xE9\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:handleCreateDiscussion,children:\"Nouvelle discussion\"})]}),/*#__PURE__*/_jsx(Search,{placeholder:\"Rechercher une discussion...\",allowClear:true,enterButton:/*#__PURE__*/_jsx(SearchOutlined,{}),size:\"large\",onSearch:handleSearch,style:{maxWidth:500}}),/*#__PURE__*/_jsx(Tabs,{activeKey:activeCategory,onChange:setActiveCategory,items:categories.map(category=>({key:category.key,label:category.label}))}),/*#__PURE__*/_jsx(Space,{direction:\"vertical\",size:\"middle\",style:{width:'100%'},children:filteredDiscussions.map(discussion=>/*#__PURE__*/_jsx(Card,{hoverable:true,onClick:()=>navigate(`/forum/${discussion.id}`),children:/*#__PURE__*/_jsx(Card.Meta,{avatar:/*#__PURE__*/_jsx(Avatar,{src:discussion.author.avatar,children:discussion.author.name[0]}),title:discussion.title,description:/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",size:\"small\",children:[/*#__PURE__*/_jsx(\"div\",{children:discussion.content}),/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Tag,{color:\"blue\",children:discussion.category}),/*#__PURE__*/_jsxs(\"span\",{children:[discussion.repliesCount,\" r\\xE9ponses\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[discussion.likesCount,\" likes\"]}),/*#__PURE__*/_jsx(\"span\",{children:new Date(discussion.createdAt).toLocaleDateString()})]})]})})},discussion.id))})]}),/*#__PURE__*/_jsx(CreateDiscussionModal,{visible:isCreateModalVisible,onClose:()=>setIsCreateModalVisible(false),onSuccess:()=>{setIsCreateModalVisible(false);message.success('Discussion créée avec succès !');fetchDiscussions();}})]})});};export default ForumPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}