{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,Row,Col,Typography,DatePicker,Select,Spin}from'antd';import{adminService}from'../../../services/adminService';import{Line,Pie}from'@ant-design/plots';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Title}=Typography;const{RangePicker}=DatePicker;const Statistics=()=>{const[loading,setLoading]=useState(true);const[viewType,setViewType]=useState('week');const[dateRange,setDateRange]=useState(null);const[stats,setStats]=useState(null);const fetchStats=async()=>{try{setLoading(true);const data=await adminService.getStatistics(dateRange?{start:dateRange[0],end:dateRange[1]}:undefined,viewType);setStats(data);}catch(error){console.error('Erreur lors du chargement des statistiques:',error);}finally{setLoading(false);}};useEffect(()=>{fetchStats();},[dateRange,viewType]);if(loading||!stats){return/*#__PURE__*/_jsx(Spin,{size:\"large\"});}const userGrowthConfig={data:stats.userGrowth,xField:'date',yField:'count',smooth:true,point:{size:5,shape:'diamond'}};const subscriptionConfig={data:stats.subscriptionDistribution,angleField:'count',colorField:'type',radius:0.8,label:{type:'outer'}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:20},children:/*#__PURE__*/_jsxs(Row,{gutter:16,align:\"middle\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(RangePicker,{onChange:dates=>{if(dates&&dates[0]&&dates[1]){setDateRange([dates[0].toDate(),dates[1].toDate()]);}else{setDateRange(null);}},style:{marginRight:16}})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Select,{value:viewType,onChange:setViewType,style:{width:120},options:[{value:'day',label:'Par jour'},{value:'week',label:'Par semaine'},{value:'month',label:'Par mois'}]})})]})}),/*#__PURE__*/_jsxs(Row,{gutter:[16,16],children:[/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{title:\"Utilisateurs totaux\",children:/*#__PURE__*/_jsx(\"h2\",{children:stats.users})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{title:\"Offres d'emploi\",children:/*#__PURE__*/_jsx(\"h2\",{children:stats.jobs})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{title:\"Abonnements actifs\",children:/*#__PURE__*/_jsx(\"h2\",{children:stats.subscriptions})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{title:\"Revenus (FCFA)\",children:/*#__PURE__*/_jsx(\"h2\",{children:stats.revenue.toLocaleString()})})})]}),/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginTop:16},children:[/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Card,{title:\"Croissance des utilisateurs\",children:/*#__PURE__*/_jsx(Line,{...userGrowthConfig})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Card,{title:\"Distribution des abonnements\",children:/*#__PURE__*/_jsx(Pie,{...subscriptionConfig})})})]})]});};export default Statistics;","map":{"version":3,"names":["React","useState","useEffect","Card","Row","Col","Typography","DatePicker","Select","Spin","adminService","Line","Pie","jsx","_jsx","jsxs","_jsxs","Title","RangePicker","Statistics","loading","setLoading","viewType","setViewType","dateRange","setDateRange","stats","setStats","fetchStats","data","getStatistics","start","end","undefined","error","console","size","userGrowthConfig","userGrowth","xField","yField","smooth","point","shape","subscriptionConfig","subscriptionDistribution","angleField","colorField","radius","label","type","children","style","marginBottom","gutter","align","onChange","dates","toDate","marginRight","value","width","options","span","title","users","jobs","subscriptions","revenue","toLocaleString","marginTop"],"sources":["C:/Users/babac/OneDrive/Bureau/businessconnect-senegal-main/businessconnect-senegal/client/src/pages/admin/components/Statistics.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Card, \r\n  Row, \r\n  Col, \r\n  Statistic, \r\n  Typography,\r\n  DatePicker,\r\n  Select,\r\n  Space,\r\n  Spin\r\n} from 'antd';\r\nimport {\r\n  UserOutlined,\r\n  TeamOutlined,\r\n  ShoppingOutlined,\r\n  MessageOutlined,\r\n  CrownOutlined,\r\n  DollarOutlined,\r\n  RiseOutlined,\r\n  FileTextOutlined\r\n} from '@ant-design/icons';\r\nimport { adminService } from '../../../services/adminService';\r\nimport { Line, Pie } from '@ant-design/plots';\r\n\r\nconst { Title } = Typography;\r\nconst { RangePicker } = DatePicker;\r\n\r\ninterface StatData {\r\n  users: number;\r\n  jobs: number;\r\n  subscriptions: number;\r\n  revenue: number;\r\n  userGrowth: { date: string; count: number }[];\r\n  subscriptionDistribution: { type: string; count: number }[];\r\n}\r\n\r\nconst Statistics: React.FC = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [viewType, setViewType] = useState<'day' | 'week' | 'month'>('week');\r\n  const [dateRange, setDateRange] = useState<[Date, Date] | null>(null);\r\n  const [stats, setStats] = useState<StatData | null>(null);\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await adminService.getStatistics(\r\n        dateRange ? { start: dateRange[0], end: dateRange[1] } : undefined,\r\n        viewType\r\n      );\r\n      setStats(data);\r\n    } catch (error) {\r\n      console.error('Erreur lors du chargement des statistiques:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchStats();\r\n  }, [dateRange, viewType]);\r\n\r\n  if (loading || !stats) {\r\n    return <Spin size=\"large\" />;\r\n  }\r\n\r\n  const userGrowthConfig = {\r\n    data: stats.userGrowth,\r\n    xField: 'date',\r\n    yField: 'count',\r\n    smooth: true,\r\n    point: {\r\n      size: 5,\r\n      shape: 'diamond',\r\n    },\r\n  };\r\n\r\n  const subscriptionConfig = {\r\n    data: stats.subscriptionDistribution,\r\n    angleField: 'count',\r\n    colorField: 'type',\r\n    radius: 0.8,\r\n    label: {\r\n      type: 'outer',\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ marginBottom: 20 }}>\r\n        <Row gutter={16} align=\"middle\">\r\n          <Col>\r\n            <RangePicker\r\n              onChange={(dates) => {\r\n                if (dates && dates[0] && dates[1]) {\r\n                  setDateRange([dates[0].toDate(), dates[1].toDate()]);\r\n                } else {\r\n                  setDateRange(null);\r\n                }\r\n              }}\r\n              style={{ marginRight: 16 }}\r\n            />\r\n          </Col>\r\n          <Col>\r\n            <Select\r\n              value={viewType}\r\n              onChange={setViewType}\r\n              style={{ width: 120 }}\r\n              options={[\r\n                { value: 'day', label: 'Par jour' },\r\n                { value: 'week', label: 'Par semaine' },\r\n                { value: 'month', label: 'Par mois' },\r\n              ]}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n\r\n      <Row gutter={[16, 16]}>\r\n        <Col span={6}>\r\n          <Card title=\"Utilisateurs totaux\">\r\n            <h2>{stats.users}</h2>\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card title=\"Offres d'emploi\">\r\n            <h2>{stats.jobs}</h2>\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card title=\"Abonnements actifs\">\r\n            <h2>{stats.subscriptions}</h2>\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card title=\"Revenus (FCFA)\">\r\n            <h2>{stats.revenue.toLocaleString()}</h2>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col span={16}>\r\n          <Card title=\"Croissance des utilisateurs\">\r\n            <Line {...userGrowthConfig} />\r\n          </Card>\r\n        </Col>\r\n        <Col span={8}>\r\n          <Card title=\"Distribution des abonnements\">\r\n            <Pie {...subscriptionConfig} />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Statistics; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}